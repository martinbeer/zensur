<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banned Books ‚Äì Meinungen</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            height: 100vh; width: 100vw; overflow: hidden;
        }
        .container { width: 100vw; height: 100vh; display: flex; flex-direction: column; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; }
        .modal-content { background: #fff; border-radius: 20px; width: 95vw; height: 95vh; box-shadow: 0 25px 50px rgba(0,0,0,0.3); overflow: hidden; display: flex; flex-direction: column; }
        .modal-header { background: linear-gradient(135deg, #e74c3c, #c0392b); color: #fff; padding: 18px 24px; display: flex; align-items: center; justify-content: space-between; }
        .modal-title { font-size: 1.6rem; font-weight: 700; }
        .close-btn { background: none; border: none; color: #fff; font-size: 2rem; cursor: pointer; width: 40px; height: 40px; border-radius: 50%; display: grid; place-items: center; }
        .close-btn:hover { background: rgba(255,255,255,0.2); }
    .modal-body { position: relative; flex: 1; display: grid; grid-template-rows: auto 1fr; gap: 16px; padding: 18px; background: linear-gradient(135deg, #ecf0f1, #ffffff); min-height: 0; }

        /* Conversation selector */
        .selector { display: flex; gap: 10px; flex-wrap: wrap; }
        .sel-btn { background: #fff; border: 1px solid rgba(0,0,0,0.1); border-radius: 999px; padding: 10px 14px; cursor: pointer; font-weight: 600; color: #2c3e50; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
        .sel-btn.active { background: #e74c3c; color: #fff; border-color: transparent; }

        /* Chat window */
    .chat-wrap { position: relative; height: 100%; background: rgba(255,255,255,0.85); border: 1px solid rgba(0,0,0,0.08); border-radius: 16px; overflow: hidden; display: grid; grid-template-columns: 1fr; grid-template-rows: 1fr; min-height: 0; }
    .chat { padding: 16px; overflow-y: auto; scroll-behavior: smooth; height: 100%; min-height: 0; }
        .msg { max-width: min(70ch, 85%); padding: 12px 14px; border-radius: 14px; margin: 10px 0; line-height: 1.6; box-shadow: 0 6px 16px rgba(0,0,0,0.06); position: relative; word-wrap: break-word; }
        .from-interviewer { background: #f0f6ff; border: 1px solid #d6e6ff; color: #1f3b66; margin-right: auto; }
        .from-respondent { background: #eefaf3; border: 1px solid #cdeedd; color: #1f5a3e; margin-left: auto; }
        .name { font-size: 0.75rem; font-weight: 700; opacity: 0.7; margin-bottom: 6px; display: block; }
        .typing { border-right: 2px solid rgba(0,0,0,0.4); animation: caret 0.8s steps(1) infinite; }
        @keyframes caret { 50% { border-color: transparent; } }

    /* Right-side click hint and edge overlay */
    .hint { position: absolute; right: 14px; bottom: 14px; background: rgba(0,0,0,0.6); color: #fff; padding: 8px 12px; border-radius: 10px; font-size: 0.9rem; backdrop-filter: blur(6px); }
    .edge-indicator { position: absolute; top: 0; right: 0; width: 36%; height: 100%; pointer-events: none; background: linear-gradient(270deg, rgba(231,76,60,0.06), rgba(231,76,60,0)); }
        .progress { position: absolute; right: 14px; top: 14px; background: rgba(255,255,255,0.85); color: #2c3e50; padding: 6px 10px; border-radius: 999px; font-size: 0.85rem; border: 1px solid rgba(0,0,0,0.08); }

        @media (max-width: 768px) {
            .modal-content { width: 100vw; height: 100vh; border-radius: 0; }
            .modal-header { border-radius: 0; }
            .edge-indicator { width: 45%; }
        }
    </style>

    <div class="container">
        <div class="modal-overlay active">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">üìö Banned Books ‚Äì Meinungen</h2>
                    <button class="close-btn" onclick="goBackToMain()">&times;</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <div class="selector" id="selector"></div>
                    <div class="chat-wrap">
                        <div class="chat" id="chat"></div>
                        <div class="edge-indicator" aria-hidden="true"></div>
                        <div class="progress" id="progress">0 / 0</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const transcripts = [
            {
                id: 'umfrage1', label: 'Umfrage 1 ‚Äì Mann', interviewer: 'Matej', respondent: 'Mann',
                lines: [
                    { s: 'i', t: 'Lesen Sie gerne B√ºcher? Wenn ja, wie oft?' },
                    { s: 'r', t: 'Ja, drei- bis viermal die Woche.' },
                    { s: 'i', t: 'Was ist Ihre Meinung dazu, dass die heutige Jugend immer weniger liest?' },
                    { s: 'r', t: 'B√ºcher lesen ist definitiv wichtig, und das fehlt unserer Jugend schon ein wenig.' },
                    { s: 'i', t: 'Haben Sie schon einmal etwas von ‚ÄûBanned Books‚Äú geh√∂rt?' },
                    { s: 'r', t: 'Ja, davon habe ich auch schon mal etwas geh√∂rt. Das handelt sich doch um verbotene B√ºcher.' },
                    { s: 'i', t: 'Ja, genau. Und was ist Ihre Meinung dazu, dass B√ºcher in bestimmten L√§ndern verboten werden?' },
                    { s: 'r', t: 'Schwierig zu sagen, dass man alle B√ºcher verbietet. Es gibt gute Gr√ºnde, dass man das ein oder andere Buch verbietet. Meiner Meinung nach ist dies aber ein sehr schweres Thema.' },
                    { s: 'i', t: 'Kennen Sie das Buch Fahrenheit 451 und was halten Sie von einer solchen Welt?' },
                    { s: 'r', t: 'Gar nichts, unvorstellbar! Eine Welt ohne B√ºcher gef√§llt mir nicht und kann in meinen Augen nicht funktionieren.' }
                ]
            },
            {
                id: 'umfrage2', label: 'Umfrage 2 ‚Äì M√§dchen', interviewer: 'Matej', respondent: 'M√§dchen',
                lines: [
                    { s: 'i', t: 'Liest du gerne B√ºcher? Wie oft?' },
                    { s: 'r', t: 'Ja, auch regelm√§√üig!' },
                    { s: 'i', t: 'Hast du schon mal etwas von ‚ÄûBanned Books‚Äú geh√∂rt?' },
                    { s: 'r', t: 'Ja, ich habe ‚ÄûBanned Books‚Äú in zwei verschiedenen Zusammenh√§ngen geh√∂rt. Einmal, dass Donald Trump eine bestimmte Liste von B√ºchern sperren will/gesperrt hat. Das andere Mal, dass fr√ºher d√§monische B√ºcher von der Kirche verbrannt wurden.' },
                    { s: 'i', t: 'Hast du schon einmal von dem Buch Fahrenheit 451 geh√∂rt?' },
                    { s: 'r', t: 'Ja, ich habe schon mal davon geh√∂rt, aber bisher noch nicht gelesen. Es ist bereits auf meiner B√ºcherliste.' },
                    { s: 'i', t: 'Was h√§ltst du von einer Welt wie der in Fahrenheit 451?' },
                    { s: 'r', t: 'Ich finde eine solche Welt ziemlich bl√∂d. Allein der Gedanke daran, dass niemand mehr richtig nachdenkt, finde ich schon schlimm. B√ºcher sind ein wichtiger Bestandteil f√ºr Informationen. Beispielsweise durch ChatGPT strengt sich keiner mehr selbst an.' }
                ]
            },
            {
                id: 'umfrage3', label: 'Umfrage 3 ‚Äì Frau', interviewer: 'Max', respondent: 'Frau',
                lines: [
                    { s: 'i', t: 'Erstmal vorab: Lesen Sie gerne B√ºcher? Wenn ja, was f√ºr ein Genre von B√ºchern lesen Sie?' },
                    { s: 'r', t: 'Ja, tue ich. Aktuell lese ich mehr Sachb√ºcher, beispielsweise √ºber Lustenau.' },
                    { s: 'i', t: 'Heutzutage ist es ja nicht mehr so √ºblich, dass Jugendliche in unserem Alter viel lesen.' },
                    { s: 'r', t: 'Ja, ich bin der Meinung, um die Sprache richtig gut zu k√∂nnen, ist es besonders wichtig, sich mit B√ºchern zu befassen. Abgesehen davon finde ich, dass die Nachrichten auf den sozialen Medien nicht mit der Qualit√§t der Sprache in den verschiedenen B√ºchern mithalten k√∂nnen.' },
                    { s: 'i', t: 'Haben Sie schon einmal von ‚ÄûBanned Books‚Äú geh√∂rt?' },
                    { s: 'r', t: 'Nein, bisher noch nicht. Ich k√∂nnte mir darunter vorstellen, dass manche B√ºcher, die zu gesellschaftskritisch sind, von Regierungen verboten werden.' },
                    { s: 'i', t: 'Kennen Sie das Buch Fahrenheit 451 und k√∂nnte man mittlerweile die dystopische Welt im Buch mit unserer Welt vergleichen?' },
                    { s: 'r', t: '√Ñhm, durch den heutzutage starken Handykonsum denke ich schon, dass das direkte pers√∂nliche Gespr√§ch deutlich weniger geworden ist. Was meiner Meinung nach beim Lesen besonders hilft, ist das Vorlesen von B√ºchern. Laut einer Studie hat dies einen positiven Effekt bei Kleinkindern.' }
                ]
            }
        ];

        let current = 0; // transcript index
        let step = 0;    // line index
    let typing = false;
        let typerInterval = null;
    let currentTyping = null; // { el, fullText, done }
    // No autoplay; user advances via right-side clicks

        const selectorEl = document.getElementById('selector');
        const chatEl = document.getElementById('chat');
        const progressEl = document.getElementById('progress');
    const modalBody = document.getElementById('modalBody');

        function goBackToMain(){ window.location.href = 'index.html'; }
        window.goBackToMain = goBackToMain;

        function renderSelector(){
            selectorEl.innerHTML = '';
            transcripts.forEach((t, i) => {
                const b = document.createElement('button');
                b.className = 'sel-btn' + (i === current ? ' active' : '');
                b.textContent = t.label;
                b.onclick = () => { selectTranscript(i); };
                selectorEl.appendChild(b);
            });
        }

        function selectTranscript(i){
            current = i; step = 0; stopTyping();
            chatEl.innerHTML = '';
            renderSelector();
            updateProgress();
            // Add a small intro bubble
            const intro = document.createElement('div');
            intro.className = 'msg from-interviewer';
            intro.innerHTML = `<span class=\"name\">${transcripts[current].interviewer}</span><span>Wir haben Leute auf der Stra√üe Interviewt: Klicke rechts, um den Dialog zu starten ‚Ä¶</span>`;
            chatEl.appendChild(intro);
        }

        function stopTyping(){
            // Immediately finalize the current typing: show full text and call done
            typing = false;
            if (typerInterval) { clearInterval(typerInterval); typerInterval = null; }
            if (currentTyping && currentTyping.el) {
                const { el, fullText, done } = currentTyping;
                el.textContent = fullText;
                currentTyping = null;
                done && done();
            }
        }

        function typeText(targetEl, fullText, speed=18, done){
            typing = true;
            currentTyping = { el: targetEl, fullText, done };
            let i = 0;
            const write = () => {
                if (!typing) { targetEl.textContent = fullText; currentTyping = null; done && done(); return; }
                targetEl.textContent = fullText.slice(0, i++);
                if (i <= fullText.length) {
                    typerInterval = setTimeout(write, speed);
                } else {
                    typing = false;
                    const d = done; currentTyping = null; d && d();
                }
            };
            write();
        }

        function appendNextLine(){
            const t = transcripts[current];
            if (step >= t.lines.length) return; // finished

            const line = t.lines[step++];
            const isInterviewer = line.s === 'i';
            const bubble = document.createElement('div');
            bubble.className = 'msg ' + (isInterviewer ? 'from-interviewer' : 'from-respondent');

            const name = document.createElement('span');
            name.className = 'name';
            name.textContent = isInterviewer ? t.interviewer : t.respondent;
            const text = document.createElement('span');
            text.className = 'typing';

            bubble.appendChild(name);
            bubble.appendChild(text);
            chatEl.appendChild(bubble);
            chatEl.scrollTop = chatEl.scrollHeight;

            typeText(text, line.t, 14, () => {
                text.classList.remove('typing');
                updateProgress();
            });
        }

        function updateProgress(){
            const t = transcripts[current];
            progressEl.textContent = `${Math.min(step, t.lines.length)} / ${t.lines.length}`;
        }

        // Click handling: advance only when clicking on the right side; click while typing skips to end
        document.addEventListener('click', (e) => {
            const rect = modalBody.getBoundingClientRect();
            const clickInBody = e.clientX >= rect.left && e.clientX <= rect.right && e.clientY >= rect.top && e.clientY <= rect.bottom;
            if (!clickInBody) return;
            const thresholdX = rect.left + rect.width * 0.64; // right ~36%
            if (e.clientX < thresholdX) return;
            if (typing) { stopTyping(); } else { appendNextLine(); }
        });

        // Keyboard support: ArrowRight to advance or skip typing
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') { if (typing) stopTyping(); else appendNextLine(); }
        });

        // Init
        renderSelector();
        selectTranscript(0);
        updateProgress();
    </script>
</body>
</html>
